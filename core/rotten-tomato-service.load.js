montageDefine("fefb24d","core/rotten-tomato-service",{dependencies:["montage/core/core","montage/core/range-controller","./category-controller","./jsonp-transport"],factory:function(e,t){var o=e("montage/core/core").Montage,n=e("montage/core/range-controller").RangeController,r=e("./category-controller").CategoryController,a=e("./jsonp-transport").shared,i="edvr96kp6mddwsasvmt269pw",l="http://api.rottentomatoes.com/api/public/v1.0/lists/movies/box_office.json?limit=15&country=us&apikey="+i,s="http://api.rottentomatoes.com/api/public/v1.0/lists/movies/upcoming.json?page_limit=30&page=1&country=us&apikey="+i,c="http://api.rottentomatoes.com/api/public/v1.0/lists/dvds/top_rentals.json?limit=20&country=us&apikey="+i,u="http://api.rottentomatoes.com/api/public/v1.0/lists/movies/in_theaters.json?page_limit=30&page=1&country=us&apikey="+i;t.RottenTomatoService=o.specialize({constructor:{value:function(){this.super(),this.categories=(new n).initWithContent([]),this.categories.avoidsEmptySelection=!0}},load:{value:function(){var e=this;e.latestBoxOffice=new r("Box Office","box_office"),e.upcoming=new r("Upcoming","upcoming"),e.topDvdRentals=new r("Rentals","rentals"),e.inTheaters=new r("In Theaters","in_theaters");var t=this.loadLatestBoxOfficeMovies().then(function(t){e.latestBoxOffice.contentController.content=t,e.categories.content.push(e.latestBoxOffice,e.inTheaters,e.upcoming,e.topDvdRentals),e.categories.select(e.latestBoxOffice)});return t.then(function(){return[e.loadUpcomingMovies(),e.loadTopDvdRentals(),e.loadInTheaters()]}).spread(function(t,o,n){e.upcoming.contentController.content=t,e.topDvdRentals.contentController.content=o,e.inTheaters.contentController.content=n}).done(),t}},categories:{value:null},latestBoxOffice:{value:null},upcoming:{value:null},topDvdRentals:{value:null},inTheaters:{value:null},loadLatestBoxOfficeMovies:{value:function(){return a.makeRequest(l,"rottenTomato").then(function(e){return e.movies})}},loadUpcomingMovies:{value:function(){return a.makeRequest(s,"rottenTomato").then(function(e){return e.movies})}},loadTopDvdRentals:{value:function(){return a.makeRequest(c,"rottenTomato").then(function(e){return e.movies})}},loadInTheaters:{value:function(){return a.makeRequest(u,"rottenTomato").then(function(e){return e.movies})}}}),t.shared=new t.RottenTomatoService}});