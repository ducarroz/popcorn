montageDefine("fefb24d","core/jsonp-transport",{dependencies:["montage/core/core","query-params","url","montage/core/uuid","montage/core/promise"],factory:function(e,r){var o=e("montage/core/core").Montage,n=e("query-params"),t=e("url"),a=e("montage/core/uuid"),l=e("montage/core/promise").Promise;r.JsonpTransport=o.specialize({constructor:{value:function(){this.super()}},makeRequest:{value:function(e,r,o){var c,s=l.defer(),i=this,u=t.parse(e),p=n.decode(u.query),d=r?r+"ServiceCallback":"serviceCallback",m=d+a.generate().replace(/-/g,"_"),g=document.createElement("script");return window[m]=function(e){i._handleResponse(e,s),document.head.removeChild(g),delete window[m]},p[o?o:"callback"]=m,c=e.replace(u.query,"")+n.encode(p),g.src=c,document.head.appendChild(g),s.promise}},_handleResponse:{value:function(e,r){console.log("response",e),e?e.error?r.reject(Error(e.error)):r.resolve(e):r.reject(Error("Unknown API Error"))}}}),r.shared=new r.JsonpTransport}});