montageDefine("99596c3","compile-evaluator",{dependencies:["collections/shim-object","collections/map","collections/sorted-set","./operators","./scope","./parse"],factory:function(e,i,t){function s(e){return s.semantics.compile(e)}var a=e("collections/shim-object"),u=e("collections/map"),n=e("collections/sorted-set"),l=e("./operators");e("./scope"),t.exports=s;var r={literal:function(e){return function(){return e.value}},value:function(){return function(e){return e.value}},parameters:function(){return function(e){return e.parameters}},element:function(e){return function(i){return i.document.getElementById(e.id)}},component:function(e){return function(i){return i.components.getObjectByLabel(e.label)}},tuple:function(e){var i=e.args.map(this.compile,this);return function(e){return i.map(function(i){return i(e)})}},record:function(e){var i=e.args,t={};for(var s in i)t[s]=this.compile(i[s]);return function(e){var i={};for(var s in t)i[s]=t[s](e);return i}}},o={mapBlock:function(e,i){return function(t){return e(t).map(function(e){return i(t.nest(e))})}},filterBlock:function(e,i){return function(t){return e(t).filter(function(e){return i(t.nest(e))})}},someBlock:function(e,i){return function(t){return e(t).some(function(e){return i(t.nest(e))})}},everyBlock:function(e,i){return function(t){return e(t).every(function(e){return i(t.nest(e))})}},sortedBlock:function(e,i){return function(t){return e(t).sorted(Function.by(function(e){return i(t.nest(e))}))}},sortedSetBlock:function(e,i){return function(t){function s(e){return i(t.nest(e))}function u(e,i){return a.compare(s(e),s(i))}function l(e,i){return a.equals(s(e),s(i))}return new n(e(t),l,u)}},groupBlock:function(e,i){return function(t){return e(t).group(function(e){return i(t.nest(e))})}},groupMapBlock:function(e,i){return function(t){return new u(e(t).group(function(e){return i(t.nest(e))}))}},minBlock:function(e,i){return function(t){return e(t).min(Function.by(function(e){return i(t.nest(e))}))}},maxBlock:function(e,i){return function(t){return e(t).max(Function.by(function(e){return i(t.nest(e))}))}},parent:function(e){return function(i){return e(i.parent)}},"with":function(e,i){return function(t){return i(t.nest(e(t)))}},"if":function(e,i,t){return function(s){var a=e(s);if(null!=a)return a?i(s):t(s)}},not:function(e){return function(i){return!e(i)}},and:function(e,i){return function(t){return e(t)&&i(t)}},or:function(e,i){return function(t){return e(t)||i(t)}},"default":function(e,i){return function(t){var s=e(t);return null==s&&(s=i(t)),s}},defined:function(e){return function(i){var t=e(i);return null!=t}},path:function(i,t){return function(a){var u=i(a),n=t(a),l=e("./parse");try{var r=l(n),o=s(r);return o(a.nest(u))}catch(c){}}}},c=a.clone(l,1);a.addEach(c,{property:function(e,i){return e[i]},get:function(e,i){return e.get(i)},mapContent:Function.identity,rangeContent:Function.identity,view:function(e,i,t){return e.slice(i,i+t)}}),s.semantics={compilers:r,argCompilers:o,operators:c,compile:function(e){var i=this.compilers,t=this.argCompilers,s=this.operators;if(i.hasOwnProperty(e.type))return i[e.type].call(this,e);if(t.hasOwnProperty(e.type)){var a=e.args.map(this.compile,this);return t[e.type].apply(null,a)}s.hasOwnProperty(e.type)||(s[e.type]=function(i){var t=Array.prototype.slice.call(arguments,1);if(!i[e.type])throw new TypeError("Can't call "+JSON.stringify(e.type)+" of "+i);return i[e.type].apply(i,t)});var u=s[e.type],a=e.args.map(this.compile,this);return function(e){var i=a.map(function(i){return i(e)});if(i.every(l.defined))return u.apply(null,i)}}}}});